<div class="war-room-map-container">
  <!-- Grid Overlay -->
  <div class="grid-overlay"></div>

  <!-- Map Container -->
  <div class="map-container">
    <div id="war-room-map"></div>

    <!-- Map controls: zoom in, zoom out, fullscreen (grouped top-right) -->
    <div class="map-controls">
      <button
        type="button"
        class="map-control-btn zoom-in-btn"
        (click)="zoomIn()"
        aria-label="Zoom in"
        title="Zoom in"
      >+</button>
      <button
        type="button"
        class="map-control-btn zoom-out-btn"
        (click)="zoomOut()"
        aria-label="Zoom out"
        title="Zoom out"
      >−</button>
      <button
        type="button"
        class="map-control-btn fullscreen-btn"
        (click)="toggleFullscreen()"
        [attr.aria-label]="getFullscreenState() ? 'Exit fullscreen' : 'Enter fullscreen'"
        [title]="getFullscreenState() ? 'Exit Fullscreen (ESC)' : 'Enter Fullscreen'"
      >
        <span class="fullscreen-icon">{{ getFullscreenState() ? '⤓' : '⤢' }}</span>
      </button>
    </div>
  </div>

  <!-- Node Markers Overlay -->
  <div class="node-markers-overlay">
    @for (node of nodes(); track node.id) {
      <div
        class="node-marker-wrapper"
        [style.top.px]="getNodePosition(node).top"
        [style.left.px]="getNodePosition(node).left"
        [class.selected]="isNodeSelected(node)"
        [class.hub]="isHub(node)"
      >
        <div class="node-marker" [class.hub-marker]="isHub(node)"></div>
        <div class="glass-tag">{{ getNodeDisplayName(node) }}</div>
      </div>
    }
  </div>
</div>
