<div class="activity-log-container">
  <div class="activity-log-header">
    <h2 class="section-title">CRITICAL OPERATION LOG</h2>
  </div>

  <div class="activity-log-entries">
    @for (log of getDisplayedLogs(); track log.id) {
      <div
        class="log-entry"
        [class.selected]="isSelected(log)"
        [class.status-active]="getStatusClass(log.status) === 'status-active'"
        [class.status-info]="getStatusClass(log.status) === 'status-info'"
        [class.has-logo]="!!log.logo"
        (click)="onLogClick(log)"
      >
        <div class="log-header">
          <div class="log-header-left">
            @if (log.logo) {
              <img [src]="log.logo" alt="Company logo" class="company-logo" />
            }
            <div class="log-title-wrapper">
              <span class="log-status">{{ log.status }}</span>
              <span class="log-timestamp">{{ formatTimestamp(log.timestamp) }}</span>
            </div>
          </div>
        </div>
        <div class="log-content">
          <div class="log-info-row">
            <span class="info-label">Company:</span>
            <span class="company-name" (click)="onCompanyNameClick(log, $event)">{{ getCompanyNameFromTitle(log.title) }}</span>
          </div>
          @if (getLocationFromTitle(log.title)) {
            <div class="log-info-row">
              <span class="info-label">Location:</span>
              <span class="location-name">{{ getLocationFromTitle(log.title) }}</span>
            </div>
          }
          @if (log.description) {
            <div class="log-info-row description-row">
              <span class="info-label">Description:</span>
              <span class="log-description">{{ log.description }}</span>
            </div>
          }
        </div>
      </div>
    }
  </div>
</div>
